# 자동 시퀀스 모드 분리 및 안정화 (V5.4.14)

매매 도중 자동 시퀀스 명령이 들어왔을 때 발생할 수 있는 혼선을 방지하기 위해, 수동과 자동 모드를 확실하게 분리하는 로직을 적용했습니다.

## 주요 변경 사항

### 1. 매매 중(`RUNNING`) 자동 명령 차단 (엄격한 분리)
- **현상**: 매매가 진행 중일 때 원격으로 [auto](file:///d:/Work/Python/AutoBuy/KipoStockNow/Kipo_GUI_main.py#1543-1656) 명령이 들어오면 기존 매매와 섞이거나 예기치 않게 멈추는 상황이 있었습니다.
- **해결**: 자기가 요청한 대로, 엔진이 **`RUNNING` 상태일 때는 모든 [auto](file:///d:/Work/Python/AutoBuy/KipoStockNow/Kipo_GUI_main.py#1543-1656) 명령을 거부**합니다. 
- **알림**: 명령이 거부되면 로그창과 텔레그램으로 "매매 진행 중에는 자동 시퀀스를 시작할 수 없습니다. STOP 후 다시 시도하세요."라는 메시지를 보냅니다.
- **결과**: 이제 수동 매매와 자동 시퀀스가 서로 간섭하지 않고 명확하게 구분됩니다.

### 2. 지연 로직 제거 및 즉시 로드
- 아까 임시로 넣었던 '5초 대기 후 시작' 기능을 제거했습니다. 
- 이제 `READY` 상태에서 [auto](file:///d:/Work/Python/AutoBuy/KipoStockNow/Kipo_GUI_main.py#1543-1656) 명령을 받으면, 꼬임 걱정 없이 즉시 해당 프로필로 전환하고 매매를 시작합니다.

### 3. UI 잠금 논리 최적화
- 시퀀스 자동 모드가 켜져 있더라도 매매가 멈춰있는(**`READY`**) 상태라면, 자기가 설정을 마음대로 바꿀 수 있도록 입력창 잠금을 풀어주는 기능을 유지했습니다.

## 검증 결과
- **차단 테스트**: `START`를 눌러 매매 중일 때 `auto 2` 명령을 보내면, 매매가 끊기지 않고 정상적으로 차단 메시지가 뜨는 것을 확인했습니다.
- **전환 테스트**: `STOP`을 눌러 `READY` 상태일 때 `auto 2`를 보내면, 즉시 2번 프로필로 바뀌면서 매매가 시작되는 것을 확인했습니다.

## 설치 경로
- [KipoStock_V5.4.14_Auto.exe](file:///d:/Work/Python/AutoBuy/KipoStock_V5.4/KipoStock_V5.4.14_Auto.exe)
