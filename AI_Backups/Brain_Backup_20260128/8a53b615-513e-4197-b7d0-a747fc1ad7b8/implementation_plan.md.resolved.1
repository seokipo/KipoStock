# 자동 시퀀스 전환 로직 개선 및 UI 동기화 플랜

상태 표시가 `READY`임에도 UI가 잠겨있거나, 매매 중 시퀀스 전환 시 발생할 수 있는 '꼬임(Race Condition)' 현상을 방지하기 위해 로직을 개선합니다.

## Proposed Changes

### [Kipo_GUI_main.py](file:///d:/Work/Python\AutoBuy/KipoStockNow/Kipo_GUI_main.py)

#### 1. 시퀀스 차단 로직 도입 ([on_remote_auto_sequence](file:///d:/Work/Python/AutoBuy/KipoStockNow/Kipo_GUI_main.py#817-835))
- **수동 작업 중 체크**: 명령어 수신 시 현재 상태가 `RUNNING`인지 확인합니다.
- **명령 거부**: 실행 중이라면 "⚠️ 매매 진행 중(RUNNING)에는 자동 시퀀스를 시작할 수 없습니다. 중지(STOP) 후 다시 시도하세요."라는 메시지를 텔레그램과 로그에 남기고 작업을 중단합니다.
- **READY 상태에서만 허용**: 오직 `READY` 또는 `WAITING` 상태일 때만 [auto](file:///d:/Work/Python/AutoBuy/KipoStockNow/Kipo_GUI_main.py#1545-1658) 명령을 받아들이도록 로직을 단순화합니다.

#### 2. 기존 지연 로직 제거
- [on_profile_clicked](file:///d:/Work/Python/AutoBuy/KipoStockNow/Kipo_GUI_main.py#1462-1490) 등에 추가했던 5초 지연 및 자동 재기동 로직을 제거하여 사용자의 혼란을 방지합니다.

#### 3. UI 잠금 유지
- [lock_ui_for_sequence](file:///d:/Work/Python/AutoBuy/KipoStockNow/Kipo_GUI_main.py#1659-1695)의 READY 상태 해제 로직은 유지하여, 사용자가 시퀀스 모드 대기 중에 설정을 고칠 수 있도록 편의성을 제공합니다.

## Verification Plan

### Automated Tests
- 없음 (GUI 기반 로직이므로 수동 검증 위주로 진행)

### Manual Verification
1. **매매 중 전환 테스트**:
   - 프로그램을 `START` 시킨 후 (`RUNNING` 상태), 명령어 창에 `auto 2`를 입력합니다.
   - 즉시 `STOP` 애니메이션이 작동하고 상태가 `READY`로 변하는지 확인합니다.
   - 로그에 "5초 대기" 메시지가 뜨고, 정확히 5초 뒤에 프로필 2번으로 자동 시작되는지 확인합니다.
2. **UI 잠금 해제 테스트**:
   - 시퀀스 자동 모드를 켠 상태에서 `STOP`을 눌러 엔진을 멈춥니다.
   - 상태가 `READY`일 때 입력창(익절/손절 등)을 수정할 수 있는지 확인합니다.
3. **버전 업 확인**:
   - `V5.4.13`으로 정상 표시되는지 확인합니다.
