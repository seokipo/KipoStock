# Implementation Plan - Resolve Alarm Crash & Build Refinement

The goal is to eliminate the application disappearing/crashing at the end time and ensure a reliable build process.

## User Review Required

> [!IMPORTANT]
> I am moving to a "Visual Only" or "Safe Alarm" mode where most automatic exit logic is disabled to ensure the application remains open.
> I will also add a crash logger to capture why the app disappears if it happens again.

## Proposed Changes

### [Kipo_GUI_main.py](file:///d:/Work/Python/AutoBuy/KipoBuy_Gui/Kipo_GUI_main.py)

#### [MODIFY]
- Clean up redundant `import ast` statements.
- Completely remove the [check_market_timing](file:///d:/Work/Python/AutoBuy/KipoBuy_Gui/Kipo_GUI_main.py#136-155) method and its calls to prevent any automatic "Stop & Report" logic from triggering unhandled crashes.
- Add a top-level `except` block in the `__main__` entry point to catch GUI thread exceptions and write them to a `crash_report.txt` file.
- Simplify [start_alarm](file:///d:/Work/Python/AutoBuy/KipoBuy_Gui/Kipo_GUI_main.py#663-690) to be extremely safe, logging exactly what it's doing.

### [Build Script]

#### [NEW] [build_v3.8.py](file:///d:/Work/Python/AutoBuy/KipoBuy_Gui/build_v3.8.py)
- Create a Python script to handle the PyInstaller build process.
- Use `shutil` to explicitly copy [settings.json](file:///d:/Work/Python/AutoBuy/KipoBuy_Gui/settings.json), `StockAlarm.wav`, and `icon.png` to the `dist` folder.
- This will be more reliable than command-line `copy`.

## Verification Plan

### Automated Tests
- Run the code locally and wait for the alarm time to trigger.
- Verify that the log message appears and the app doesn't close.

### Manual Verification
- Check the `dist` folder to ensure all files are present.
- Ask the user to run the new executable and monitor the behavior at 15:30 (or their set end time).
