# 중복 시작 및 START 버튼 먹통 해결 계획 (V5.2.5)

사용자가 경험한 R10001 에러와 시퀀스 종료 후 START 버튼이 작동하지 않는 문제를 해결합니다.

## 변경 사항

### 1. START 버튼 활성화 로직 보완
- **파일**: [Kipo_GUI_main.py](file:///d:/Work/Python/AutoBuy/KipoStockNow/Kipo_GUI_main.py)
- **내용**: 
  - `AsyncWorker._execute_command`의 'start' 섹션에서 `pending_start`가 이미 `True`더라도 `status_signal.emit("WAITING")`을 한 번 더 보내주어 UI 버튼 상태가 갱신(활성화)되도록 수정합니다.
  - [on_start_clicked](file:///d:/Work/Python/AutoBuy/KipoStockNow/Kipo_GUI_main.py#691-705)에서 버튼을 비활성화한 뒤, 어떤 이유로든 시작 명령이 무시될 경우를 대비해 일정 시간 뒤 버튼 상태를 확인하여 복구하는 안전장치를 추가합니다.

### 2. 시퀀스 전환 시 중복 명령(Race Condition) 방지
- **파일**: [Kipo_GUI_main.py](file:///d:/Work/Python/AutoBuy/KipoStockNow/Kipo_GUI_main.py)
- **내용**: 
  - [on_start_clicked](file:///d:/Work/Python/AutoBuy/KipoStockNow/Kipo_GUI_main.py#691-705) 내부에서 호출하는 `self.save_settings()`가 중복 [start](file:///d:/Work/Python/AutoBuy/KipoStockNow/chat_command.py#107-161) 명령을 내리지 않도록 `restart_if_running=False` 옵션을 명시적으로 전달합니다.
  - 시퀀스 전환 간격을 1초에서 2.5초로 늘려 서버 세션이 정리될 시간을 충분히 확보합니다.

### 3. R10001 방량 강화 (Internal Delay)
- **파일**: [chat_command.py](file:///d:/Work/Python/AutoBuy/KipoStockNow/chat_command.py)
- **내용**:
  - [start](file:///d:/Work/Python/AutoBuy/KipoStockNow/chat_command.py#107-161) 메서드 내 소켓 종료 후 대기 시간을 1.5초에서 2.0초로 상향 조정합니다.

## 검증 계획
1. 시퀀스 1->2->3 전환 시 R10001 에러 없이 깔끔하게 전환되는지 확인.
2. 장외 시간에 START 버튼을 여러 번 눌렀을 때 버튼이 먹통 되지 않고 계속 반응하는지 확인.
3. 시퀀스 완주 후 수동으로 START 버튼을 눌렀을 때 엔진이 정상 가동되는지 확인.
