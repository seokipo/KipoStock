# 구현 계획 - 연결 끊김 반복 및 시작 알람 수정

## 목표 설명
"Connection closed by the server" 오류가 무한 반복되는 문제를 해결하고, 시작 시간 알람이 1번만 울리도록 수정합니다.

## 사용자 검토 필요
> [!NOTE]
> "Connection closed by the server" 오류가 발생하면 이제 무한 재시도하는 대신 프로세스를 중단합니다. 이로 인해 로그 폭주가 방지되지만, 실제 연결 불안정 시 사용자가 수동으로 재시작해야 할 수도 있습니다.

## 변경 제안

### 연결 오류 반복 수정
#### [수정] [get_seq.py](file:///d:/Work/Python/AutoBuy/KipoStockNow/get_seq.py)
- [receive_messages](file:///d:/Work/Python/AutoBuy/KipoStockNow/get_seq.py#52-84) 메서드 내 `except websockets.ConnectionClosed:` 블록:
    - `self.keep_running = False` 코드를 추가하여 루프를 중단시킵니다.

### 시작 알람 반복 수정
#### [수정] [Kipo_GUI_main.py](file:///d:/Work/Python/AutoBuy/KipoStockNow/Kipo_GUI_main.py)
- [__init__](file:///d:/Work/Python/AutoBuy/KipoStockNow/Kipo_GUI_main.py#33-42) 메서드:
    - `self.last_auto_start_time = None` 변수 초기화 추가.
- [check_alarm](file:///d:/Work/Python/AutoBuy/KipoStockNow/Kipo_GUI_main.py#915-964) 메서드:
    - 시작 로직이 `current_time_str != self.last_auto_start_time` 조건일 때만 실행되도록 확인 절차 추가.
    - 실행 후 `self.last_auto_start_time = current_time_str`로 업데이트하여 중복 실행 방지.

## 검증 계획

### 수동 검증
1. **연결 오류**:
    - 코드를 통해 연결 끊김 발생 시 `keep_running` 플래그가 해제되어 루프가 종료되는지 확인합니다.
2. **시작 알람**:
    - "시작" 시간을 현재 시간 1분 뒤로 설정합니다.
    - 해당 시간이 되었을 때 알람음이 **단 1회**만 울리고, "Start" 로직이 1번만 실행되는지 로그를 통해 확인합니다.
