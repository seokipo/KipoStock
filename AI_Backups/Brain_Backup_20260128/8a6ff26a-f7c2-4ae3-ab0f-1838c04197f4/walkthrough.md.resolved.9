# KipoStock V5.1 Stable 최종 수정 사항 안내

발생했던 중복 로그인 문제, 프로그램 종료 시 멈춤 현상을 해결하고 사용성의 편의를 위해 버튼 애니메이션을 추가했습니다.

## 주요 변경 사항

### 1. 중복 로그인(R10001) 및 무한 루프 방지
- **중복 접속 차단**: `START` 버튼을 누를 때마다 이전 소켓 연결이 남아있는지 확인하고, 있다면 확실히 종료한 후 새 연결을 맺도록 보강했습니다. 이를 통해 "동일한 App key로 접속되었습니다" 에러를 원천 차단했습니다.
- **버튼 중복 클릭 방지**: `START` 버튼을 누르는 즉시 버튼을 비활성화하여, 짧은 시간에 여러 번 눌려 중복 명령이 들어가는 것을 방지했습니다.

### 2. 프로그램 종료 시 "응답 없음" 현상 해결
- **안전한 종료(Shutdown) 로직**: 프로그램을 닫을 때 내부 비동기 루프와 소켓 연결이 완전히 정리될 때까지 대기하도록 수정했습니다. 이제 앱을 종료할 때 윈도우가 하얗게 변하며 멈추는 현상이 사라집니다.

### 3. 버튼 클릭 시각 피드백 추가 (애니메이션)
- **버튼 효과**: `START`, `STOP`, `REPORT` 버튼을 클릭하면 약 0.15초 동안 색상이 반전(어둡게/테두리 강조)되어 버튼이 눌렸음을 시각적으로 확인할 수 있습니다.

### 4. 매수 시간 누락 디버깅 (보강)
- **경로 최적화**: 매수한 종목의 시간이 [today](file:///d:/Work/Python/AutoBuy/KipoStockNow/chat_command.py#240-398) 명령어에서 안 보이던 현상을 해결하기 위해, 데이터 저장 및 불러오기 시 실행 위치(`dist`, 현재 폴더 등)를 모두 체크하도록 로직을 더 견고하게 만들었습니다.

## 업데이트 확인 방법
1. **새로운 EXE 파일 실행**: `D:\Work\Python\AutoBuy\KipoStock_V5.1_Stable.exe` 파일을 실행합니다.
2. **버튼 클릭**: `START`, `STOP`, `REPORT` 버튼을 눌러보며 색상이 반짝이는지 확인합니다.
3. **종료 테스트**: 앱을 닫을 때 "응답 없음" 없이 깔끔하게 닫히는지 확인합니다.
4. **중복 로그인 확인**: 여러 번 `START`/`STOP`을 반복해도 `R10001` 에러 없이 정상 구동되는지 확인합니다.
