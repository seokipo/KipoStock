# 오류 수정 및 UI 안정화 구현 계획

이 계획은 [today](file:///d:/Work/Python/AutoBuy/KipoStockNow/chat_command.py#255-441) 명령어 실행 시 발생하는 런타임 에러를 수정하고, 압정 핀 기능의 사용자 경험을 개선하는 것을 목표로 합니다.

## 제안된 변경 사항

### 1. [today](file:///d:/Work/Python/AutoBuy/KipoStockNow/chat_command.py#255-441) 명령어 수정 (에러 수정 및 역순 정렬 추가)
#### [수정] [chat_command.py](file:///d:/Work/Python/AutoBuy/KipoStockNow/chat_command.py)
- **에러 수정**: `bt_data` 로드 로직을 [get_sort_key](file:///d:/Work/Python/AutoBuy/KipoStockNow/chat_command.py#284-290) 정의보다 위로 이동하여 `NameError`를 원천 봉쇄합니다.
- **역순 정렬**: 명령어 끝에 `-` 기호가 붙은 경우(`today-`, `today/sic-` 등) `reverse=True` 옵션을 적용하도록 수정합니다.
- **처리 순서**: [process_command](file:///d:/Work/Python/AutoBuy/KipoStockNow/chat_command.py#514-548)에서 하이픈(`-`) 존재 여부를 먼저 파악한 후 [today](file:///d:/Work/Python/AutoBuy/KipoStockNow/chat_command.py#255-441) 메서드에 인자로 전달합니다.

### 2. 압정 핀 깜빡임 문제 해결
#### [수정] [Kipo_GUI_main.py](file:///d:/Work/Python/AutoBuy/KipoStockNow/Kipo_GUI_main.py)
- `setWindowFlags` 사용 시 윈도우 핸들이 재생성되어 깜빡이는 문제를 해결하기 위해, 플래그 변경 없이 항상 위 상태만 토글할 수 있는 대안을 검토하거나, 상태가 변경될 때만 최소한의 호출을 하도록 로직을 강화합니다.

### 3. 명령어 정렬 순서 설명
- [today](file:///d:/Work/Python/AutoBuy/KipoStockNow/chat_command.py#255-441) 명령어의 각 옵션별 정렬 로직과 우선순위를 사용자에게 명확히 설명합니다.

## 검증 계획

### 수동 검증
- [today](file:///d:/Work/Python/AutoBuy/KipoStockNow/chat_command.py#255-441) 명령어를 입력했을 때 에러 없이 매수 시간순으로 정렬되는지 확인합니다.
- 압정 핀 버튼을 클릭할 때 창이 깜빡이거나 사라지지 않고 부드럽게 상태가 변하는지 확인합니다.
