# 시퀀스 버튼 장외 제한 및 예약 기능 구현 계획

사용자가 장외 시간에 시퀀스 버튼을 누르는 것을 제한하되, 장 시작 전(08:00~09:00)에는 예약을 허용하여 편의성을 높입니다.

## 제안된 변경 사항

### 1. [시장 시간 유틸리티] 공휴일 및 예약 가능 시간 체크
#### [수정] [market_hour.py](file:///d:/Work/Python/AutoBuy/KipoStockNow/market_hour.py)
 - `is_holiday()`: 2025~2026년 주요 증시 휴장일 목록을 포함하여 체크합니다.
 - `is_pre_market_reservation_time()`: 평일 **오전 08:00 ~ 09:00** 사이인지 확인하는 메서드를 추가합니다.

### 2. [UI 로직] 시퀀스 버튼 제어 로직 강화
#### [수정] [Kipo_GUI_main.py](file:///d:/Work/Python/AutoBuy/KipoStockNow/Kipo_GUI_main.py)
 - **[on_seq_auto_toggled](file:///d:/Work/Python/AutoBuy/KipoStockNow/Kipo_GUI_main.py#1376-1460)** 수정:
    - **1단계 (주말/공휴일)**: "오늘은 휴장일입니다. 시퀀스를 시작할 수 없습니다." 안내 후 버튼 해제.
    - **2단계 (평일 08:00 ~ 09:00)**: "장 시작 예약: 9시 정각에 시퀀스를 자동으로 시작합니다." 안내 후 버튼 상태 유지 (예약 상태).
    - **3단계 (정규 장 시간)**: 기존처럼 즉시 실행 및 점멸 시작.
    - **4단계 (평일 15:30 이후 ~ 다음날 08:00)**: "거래 가능 시간이 아닙니다." 안내 후 버튼 해제.
 - **자동 시작 연동**: [handle_end_time_event](file:///d:/Work/Python/AutoBuy/KipoStockNow/Kipo_GUI_main.py#1512-1575) 등 주기적으로 실행되는 타이머에서 시퀀스 버튼이 체크되어 있고 현재가 09:00 정각이면 실제 로직이 구동되도록 보강합니다.

## 검증 계획
 - 토요일인 현재 클릭 시 차단되는지 확인.
 - 코드상에서 시간을 08:30으로 가정한 테스트를 통해 예약 메시지가 나오는지 확인.
 - 09:00 도달 시 자동으로 로그가 찍히며 시퀀스가 시작되는지 확인.

## 검증 계획

### 시각적 확인
- 현재 시간(토요일)에 시퀀스 버튼을 눌러 경고 창이 뜨고 버튼이 다시 해제되는지 확인합니다.
- 로그 창에 "장외 시간으로 인해 시퀀스 모드를 시작할 수 없습니다."라는 메시지가 출력되는지 확인합니다.

### 클린 빌드
- 모든 수정 사항 반영 후 `V5.4.0`으로 빌드하여 배포합니다.
