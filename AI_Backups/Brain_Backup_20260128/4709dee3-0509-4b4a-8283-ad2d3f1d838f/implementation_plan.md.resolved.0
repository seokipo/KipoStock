# Fix Tax Data and Implement Sorting in Trade Log

The user reported that the tax data is showing as 0 and wants the trade log list to be sorted by condition name in ascending order.

## Proposed Changes

### [chat_command.py](file:///d:/Work/Python/AutoBuy/KipoBuy4.2/chat_command.py)

#### [MODIFY] [today](file:///d:/Work/Python/AutoBuy/KipoBuy4.2/chat_command.py#233-323) method

1.  **Tax Data Collection:** Add `levy_comamt`, `tr_tax`, and `tot_tr_tax` to the list of potential fields when extracting `tax`.
2.  **Sorting:** Sort the `diary_list` based on the condition name (`cond_name`) retrieved from `cond_mapping` before iterating to display rows.

```python
# Before:
# diary_list = res.get('list', [])

# After:
# diary_list = res.get('list', [])
# diary_list.sort(key=lambda x: cond_mapping.get(x['stk_cd'].replace('A', ''), "직접매매"))
```

## Verification Plan

### Manual Verification
- Since I cannot run the actual API, I will verify the code logic to ensure:
    - `tax` extraction handles the new fields.
    - `diary_list` is sorted correctly before display.
- Ask the user to run the [today](file:///d:/Work/Python/AutoBuy/KipoBuy4.2/chat_command.py#233-323) command and verify the output.
