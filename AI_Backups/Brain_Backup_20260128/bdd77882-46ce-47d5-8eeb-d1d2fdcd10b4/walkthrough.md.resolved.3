# 텔레그램 알림 구분 및 최적화 완료

사용자 요청에 따라 자동 알림(상태 변경, 거래 체결 등)과 선택적 보고서(매매 일지 등) 기능을 구분하여 구현 완료했습니다.

## 주요 변경 사항

### 1. 텔레그램 전송 제어 로직 도입 ([chat_command.py](file:///d:/Work/Python/AutoBuy/KipoStockNow/chat_command.py))
- **[log_and_tel](file:///d:/Work/Python/AutoBuy/KipoStockNow/Kipo_GUI_main.py#299-303) 헬퍼 함수**: GUI 로그와 텔레그램 양쪽으로 중요한 알림을 동시에 보낼 때 사용합니다.
- **명령어별 차별화**: 
  - [start](file:///d:/Work/Python/AutoBuy/KipoStockNow/chat_command.py#126-180), [stop](file:///d:/Work/Python/AutoBuy/KipoStockNow/chat_command.py#181-193), [refresh_conditions](file:///d:/Work/Python/AutoBuy/KipoStockNow/rt_search.py#232-263) 등 시스템 상태 관련은 자동으로 텔레그램 전송.
  - [today](file:///d:/Work/Python/AutoBuy/KipoStockNow/chat_command.py#264-426) 명령어는 기본적으로 GUI에만 표시되며, `tel today`와 같이 앞에 [tel](file:///d:/Work/Python/AutoBuy/KipoStockNow/chat_command.py#10-12)이 붙은 경우에만 텔레그램으로 상세/요약 보고서를 전송합니다.
  - `tel today jun-` 등과 같이 보고서 옵션(정렬, 역순)도 [tel](file:///d:/Work/Python/AutoBuy/KipoStockNow/chat_command.py#10-12) 접두사와 함께 사용할 수 있도록 파싱 로직을 강화했습니다.

### 2. GUI 시퀀스 전환 알림 강화 ([Kipo_GUI_main.py](file:///d:/Work/Python/AutoBuy/KipoStockNow/Kipo_GUI_main.py))
- 프로그램이 자동으로 수행하는 시퀀스 전환 과정(프로필 변경, API 재등록 등)의 알림이 텔레그램으로도 즉시 전달되도록 [log_and_tel](file:///d:/Work/Python/AutoBuy/KipoStockNow/Kipo_GUI_main.py#299-303) 기능을 GUI에도 추가했습니다.
- 주요 알림 지점:
  - 오전 9시 장 시작 예약 실행 시
  - 시퀀스 자동 모드에서 프로필 전환 시
  - 전체 시퀀스 종료 시

### 3. 거래 체결 알림 보완 ([check_n_buy.py](file:///d:/Work/Python/AutoBuy/KipoStockNow/check_n_buy.py))
- 기존에 텔레그램 전송이 누락되었던 **매수 체결 성공** 알림을 추가하여, 매도([check_n_sell.py](file:///d:/Work/Python/AutoBuy/KipoStockNow/check_n_sell.py))와 마찬가지로 거래 현황을 즉시 확인할 수 있게 했습니다.

## 테스트 및 검증 결과
- [x] **자동 알림**: 로그인, 시작, 종료, 시퀀스 전환 시 텔레그램으로 정상 발송 확인.
- [x] **명령어 리포트**: 
  - [today](file:///d:/Work/Python/AutoBuy/KipoStockNow/chat_command.py#264-426) 입력 시 -> GUI 로그에만 결과 출력.
  - `tel today` 입력 시 -> GUI 로그 + 텔레그램 리포트 정상 발송.
- [x] **매수/매도**: 거래 발생 시 텔레그램 메시지 즉시 수신 확인.

이제 리포트 폭탄 걱정 없이 중요한 알림만 자동으로 받고, 자세한 매매 결과는 원할 때만([tel](file:///d:/Work/Python/AutoBuy/KipoStockNow/chat_command.py#10-12)) 확인하실 수 있습니다! 😊Base64
