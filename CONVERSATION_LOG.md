# 📝 KipoStock 개발 대화 일지 (Conversation Log)

자기가 요청한 대로 우리의 소중한 개발 기록을 모아두는 곳이야.
여기에 우리가 어떤 기능을 만들었고, 어떤 문제를 해결했는지 날짜별로 정리해둘게! 😊

---

## 📅 2026-02-19 (v3.1 DIAMOND 업그레이드 완료) ✨
- **작업 내용**: 시퀀스별 정밀 리포트 시스템 구축, UI 다이아몬드 에디션 쇄신, 통계 엔진 일원화.
- **주요 성과**:
    1.  **시퀀스별 독립 분석**: 매매 시 시퀀스 번호를 기록하여 각 시퀀스(1, 2, 3번 등) 종료 시 해당 시퀀스만의 승률, 손익비, 프로핏 팩터를 정확하게 산출.
    2.  **종합 리포트 퀀트 지표 통합**: `today()` 함수와 `report()` 함수의 통계 엔진을 통합하여, 언제든 버튼 하나로 PF, 손익비, 기댓값 등 고급 지표 확인 가능.
    3.  **UI/UX 쇄신**: 메인 헤더 타이틀을 `v3.1 DIAMOND`로 업데이트하고 리포트의 가독성을 대폭 개선.
    4.  **배포 자동화**: 최신 수정사항이 반영된 EXE 파일(KipoStock_v3.1.exe) 빌드 및 전달 완료.
- **다음 목표**: 실제 장 운용을 통한 시퀀스 전환 안정성 최종 확인 및 추가 퀀트 모델(켈리 공식 등) 도입 검토.

---

## 📅 2026-02-19 (초기 성과)
### 1. 📈 고급 퀀트 지표 3종 세트 도입
- **내용**: `Profit Factor`, `손익비`, `기댓값` 계산 로직을 `trade_logger.py`에 구현.
- **성과**: 자기만의 '손절은 짧게, 수익은 길게' 전략의 가치를 숫자로 증명 가능.

### 2. 🕵️ HTS 매매 데이터 정밀 연동 및 보정
- **내용**: HTS에서 매수 시 '현재가'를 자동으로 가져와 매수 단가로 기록하는 로직 개선.
- **성과**: HTS 물타기 등 수동 매매가 섞여도 전체 수익률과 퀀트 지표가 매우 정밀하게 집계됨.

### 3. 📚 퀀트 전문 용어 사전 구축
- **내용**: `금액 가중`, `손익비`, `기댓값` 등 일반투자자는 알기 힘든 전문 용어 해설 추가.

---
 
## 📅 2026-02-18 (최신 성과)
### 1. 🚀 KipoStock v3.0 GOLD 정식 버전 확정
- **내용**: 윈도우 타이틀을 `KipoStock v3.0 GOLD`로 업데이트하고 최신 UI 반영.
- **성과**: 퀀트 지표(승률, MDD, 샤프 지수) 분석 기반 마련.
 
### 2. 🏗️ 전용 빌드 스펙(Spec) 파일 생성
- **내능**: `KipoStock_v3.0.spec` 파일을 생성하여 v3.0 전용 빌드 환경 구축.
 
### 3. 📚 용어 사전 대규모 업데이트
- **내용**: `Sharpe Ratio`, `MDD`, `Exponential Backoff` 등 고난도 기술 용어 4종 추가.

---
## 📅 2026-02-03 (오늘의 성과)
### 1. 🌅 장전 동시호가 데이터 수신 허용 및 GUI 제약 해제
- **내용**: 키움 API 데이터 시작 시간(08:30)에 맞춰 시스템 가동 시간 확대 및 GUI 입력 제한 해제.
- **성과**: 사용자가 설정한 08:50, 08:55 등 08:30 이후 시간부터 즉시/자동 감시 시작 가능.
 
### 2. 🏗️ 최신 실행 파일(EXE) 빌드 완료
- **내용**: 시간 로직이 반영된 `KipoStock_Lite_V1.5` 최신 버전 빌드 및 제공.
 
### 3. 📚 용어 사전 업데이트
- **내용**: `Pre-market`, `Manual Override` 등 관련 기술 용어 추가.
 
---

## 📅 2026-02-02
### 1. 📊 로그 포맷팅 정밀 조정 (Lite V1.5)
- **내용**: GUI 로그 창의 행 간격 및 단어 간격을 촘촘하게 조정하여 가시성 확보.
- **성과**: 로그 텍스트 파일 저장 시에도 포맷이 깨지지 않도록 정합성 유지.

### 2. 🏗️ KipoStock_Lite_V1.5 정식 빌드
- **내용**: 로그 개선 사항을 반영하여 새로운 실행 파일 배포.

---

## 📅 2026-01-29 (이전 성과)
### 1. 🚦 수동 START 버튼 로직 완성
- **내용**: `START` 버튼 클릭 시 UI 설정 시간과 상관없이 장중(09:00~15:30)이라면 즉시 매매가 시작되도록 수정.
- **기술**: `MarketHour` 클래스에 `Manual Override` 플래그 도입.

### 2. 🔇 음성 및 비프음 정밀 제어
- **내용**: `voice on/off` (음성 안내), `beep on/off` (효과음) 명령어를 추가하여 소리 제어권 확보.
- **디테일**: `voice off` 상태에서는 체결 시 짧은 **비프음(800Hz)**으로 대체.

### 3. 📌 '항상 위에' 플리커(깜빡임) 완전 해결
- **내용**: 핀 고정 버튼 클릭 시 창이 깜빡거리는 현상을 제거.
- **기술**: Qt 기본 함수 대신 **Windows API (`SetWindowPos`)**를 `ctypes`로 직접 호출하여 구현. 
- **특이사항**: 64비트 환경 호환성을 위해 `argtypes`를 명시적으로 지정하여 기능 복구 성공.

---

## 📅 2026-01-27 ~ 2026-01-28
### 1. 🖌️ UI 툴팁(Tooltip) 대대적 개선
- **내용**: 프로그램 내 모든 버튼과 입력창에 상세한 설명(툴팁) 추가.
- **디자인**: 폰트(맑은 고딕), 사이즈(10px), 색상 등을 통일하여 프리미엄한 느낌 구현.

### 2. 🗺️ 시스템 흐름도(Flowchart) 작성
- **내용**: `SYSTEM_FLOWCHART.md` 작성 및 시각화를 위한 `SYSTEM_FLOW_VIEWER.html` 생성.
- **목적**: 프로그램의 전체 동작 구조를 한눈에 파악.

### 3. 🐛 MCP 서버 및 기타 버그 수정
- **내용**: `MarketHour` 로직 점검, 매도 금액 0원 표시 오류 수정 등.

---

## 📅 2026-01-22 ~ 2026-01-26
- **`today` 명령어 강화**: 정렬 옵션(`son`, `jun`, `sic`) 추가 및 역순 정렬(`-`) 기능 구현.
- **프로필 버그 수정**: 프로필 버튼 클릭 시 크래시 해결 및 UI 가시성 개선.
- **알람 기능 안정화**: 알람 발생 시 프로그램 종료 오류 해결 및 사운드(beep) 안정화.
